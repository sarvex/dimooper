sudo: required
dist: trusty
language: rust
rust: 1.17.0
addons:
  apt:
    packages:
      - libportmidi-dev
      - libsdl2-dev
      - libsdl2-ttf-dev
      - libcurl4-openssl-dev
      - libelf-dev
      - libdw-dev
      - cmake
      - gcc
install:
  - wget https://github.com/SimonKagstrom/kcov/archive/v32.tar.gz
  - tar xzf v32.tar.gz
  - mkdir -p kcov-32/build/
  - pushd kcov-32/build/
  - cmake ..
  - make
  - sudo make install
  - popd
  - rm -rf kcov-32/
  - sudo pip install codecov
  - cargo install cargo-kcov
script:
  - cargo build --verbose
  - cargo test --verbose
after_success:
  - codecov
